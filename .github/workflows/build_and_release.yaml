#COmments! 
#THis file mimics the general structure of a github action <3 

name: build_and_release

#angular specific

#Trigger 

#on is an array, a - is an element in an array 
#event: push (is one push, it can be speicfic to one branch)
on: 
- push 

#alternatively
# on: [push]

# one or more jobs 

#Jobs are run sequentially (but if you toggle it: it can be in parallel too)
jobs: #PLease group your job into logical steps 
    build_app: #yeah what the fuck lmfao 
        runs-on: ubuntu-latest #It's just a clean docker image from dockerhub latest the actions are not there #where is the autocomplete? (see screenshot)
        steps: 
        - id: s00 #Best practise: always give it an ID!!
          # basically running some shell command 
          run: echo "${{github.repository}}"
        - run: echo "Before" && ls -la
        - id: s02 #Set up the environment (Microservice: separate the build across dependencies)
          uses: actions/setup-node@v4
          with:
            # Version Spec of the version to use in SemVer notation.
            # It also admits such aliases as lts/*, latest, nightly and canary builds
            # Examples: 12.x, 10.15.1, >=10.15.0, lts/Hydrogen, 16-nightly, latest, node
            node-version: '24.x'
        - id: s03 
          uses: actions/checkout@v5 #which is why it needs to be checked out here #THis is your bread and butter of the github step 
        - run: echo "After" && ls -la 
        - id: s04
        #install Angular cli and install packages from package.json 
        #(Note the common convention in the && in all the bash -- the conventions still stays: the exit code determines whether the && continues to the next step: 0 is good, exit 1 -- FAKES THE ERROR CODE Oooo)
          run: npm i -g @angular/cli && npm ci
        - id: s05 
        #build the application
          run: ng build
        - id: s06
          run: ls /dist/countingbook/browser 
        - id: s07
          uses: nwtgck/actions-netlify@v3.0
          with: 
            publish-dir: /dist/countingbook/browser 
            production-deploy: true 
          env:
            NETLIFY_AUTH_TOKEN: ${{ secrets.NETLIFY_AUTH_TOKEN }}
            NETLIFY_SITE_ID: ${{ secrets.NETLIFY_SITE_ID }}